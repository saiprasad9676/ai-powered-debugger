{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../context/AuthContext';import{signInWithRedirect,GoogleAuthProvider}from'firebase/auth';import{auth}from'../firebase';import'../styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPage=()=>{const{currentUser,googleSignIn}=useAuth();const navigate=useNavigate();const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[popupFailed,setPopupFailed]=useState(false);useEffect(()=>{// If user is logged in, redirect to app\nif(currentUser){navigate('/app');}},[currentUser,navigate]);const handleGoogleSignIn=async()=>{if(loading)return;try{setError('');setLoading(true);if(popupFailed){// If popup failed before, try redirect method\nconst provider=new GoogleAuthProvider();provider.addScope('profile');provider.addScope('email');provider.setCustomParameters({prompt:'select_account'});await signInWithRedirect(auth,provider);return;}// Try popup first\nawait googleSignIn();// Navigate will happen in the useEffect above when currentUser changes\n}catch(error){console.error('Google sign-in error:',error);let errorMessage='Failed to sign in with Google.';if(error.code==='auth/popup-closed-by-user'){errorMessage='Sign-in canceled. You closed the popup.';}else if(error.code==='auth/popup-blocked'){errorMessage='Popup was blocked. Trying redirect method...';setPopupFailed(true);// Try redirect on next click\n}else if(error.code==='auth/cancelled-popup-request'){errorMessage='Multiple popups were detected. Please try again.';}else if(error.code==='auth/network-request-failed'){errorMessage='Network error. Please check your connection and try again.';}setError(errorMessage);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.svg\",alt:\"AI Code Debugger Logo\",className:\"app-logo\"})}),/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"AI Code Debugger\"}),/*#__PURE__*/_jsx(\"p\",{className:\"app-subtitle\",children:\"Debug your code with the power of AI\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleGoogleSignIn,className:\"google-signin-button\",disabled:loading,children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://developers.google.com/identity/images/g-logo.png\",alt:\"Google logo\"}),loading?'Signing in...':popupFailed?'Continue with Google':'Sign in with Google']}),/*#__PURE__*/_jsx(\"p\",{className:\"login-info\",children:\"By signing in, you agree to our Terms of Service and Privacy Policy.\"})]})});};export default LoginPage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useAuth","signInWithRedirect","GoogleAuthProvider","auth","jsx","_jsx","jsxs","_jsxs","LoginPage","currentUser","googleSignIn","navigate","error","setError","loading","setLoading","popupFailed","setPopupFailed","handleGoogleSignIn","provider","addScope","setCustomParameters","prompt","console","errorMessage","code","className","children","src","alt","onClick","disabled"],"sources":["C:/Users/konda/Videos/Ai-powered-debugger-master/frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { signInWithRedirect, GoogleAuthProvider } from 'firebase/auth';\r\nimport { auth } from '../firebase';\r\nimport '../styles.css';\r\n\r\nconst LoginPage = () => {\r\n  const { currentUser, googleSignIn } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [popupFailed, setPopupFailed] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // If user is logged in, redirect to app\r\n    if (currentUser) {\r\n      navigate('/app');\r\n    }\r\n  }, [currentUser, navigate]);\r\n\r\n  const handleGoogleSignIn = async () => {\r\n    if (loading) return;\r\n    \r\n    try {\r\n      setError('');\r\n      setLoading(true);\r\n      \r\n      if (popupFailed) {\r\n        // If popup failed before, try redirect method\r\n        const provider = new GoogleAuthProvider();\r\n        provider.addScope('profile');\r\n        provider.addScope('email');\r\n        provider.setCustomParameters({\r\n          prompt: 'select_account'\r\n        });\r\n        await signInWithRedirect(auth, provider);\r\n        return;\r\n      }\r\n      \r\n      // Try popup first\r\n      await googleSignIn();\r\n      // Navigate will happen in the useEffect above when currentUser changes\r\n    } catch (error) {\r\n      console.error('Google sign-in error:', error);\r\n      \r\n      let errorMessage = 'Failed to sign in with Google.';\r\n      \r\n      if (error.code === 'auth/popup-closed-by-user') {\r\n        errorMessage = 'Sign-in canceled. You closed the popup.';\r\n      } else if (error.code === 'auth/popup-blocked') {\r\n        errorMessage = 'Popup was blocked. Trying redirect method...';\r\n        setPopupFailed(true);\r\n        // Try redirect on next click\r\n      } else if (error.code === 'auth/cancelled-popup-request') {\r\n        errorMessage = 'Multiple popups were detected. Please try again.';\r\n      } else if (error.code === 'auth/network-request-failed') {\r\n        errorMessage = 'Network error. Please check your connection and try again.';\r\n      }\r\n      \r\n      setError(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <div className=\"login-card\">\r\n        <div className=\"logo-container\">\r\n          <img src=\"/logo.svg\" alt=\"AI Code Debugger Logo\" className=\"app-logo\" />\r\n        </div>\r\n        <h1 className=\"app-title\">AI Code Debugger</h1>\r\n        <p className=\"app-subtitle\">Debug your code with the power of AI</p>\r\n        \r\n        {error && <div className=\"error-message\">{error}</div>}\r\n        \r\n        <button \r\n          onClick={handleGoogleSignIn} \r\n          className=\"google-signin-button\"\r\n          disabled={loading}\r\n        >\r\n          <img src=\"https://developers.google.com/identity/images/g-logo.png\" alt=\"Google logo\" />\r\n          {loading ? 'Signing in...' : popupFailed ? 'Continue with Google' : 'Sign in with Google'}\r\n        </button>\r\n        \r\n        <p className=\"login-info\">\r\n          By signing in, you agree to our Terms of Service and Privacy Policy.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}